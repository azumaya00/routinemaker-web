"use client";

import { useMemo } from "react";
import { useRouter } from "next/navigation";

import { useAuth } from "@/hooks/useAuth";

const policyText = `プライバシーポリシー

Yuru Labo（ゆるラボ）（以下、「当方」といいます。）は、当方が提供するWebサービス（以下、「本サービス」といいます。）における、ユーザーの個人情報の取扱いについて、以下のとおりプライバシーポリシー（以下、「本ポリシー」といいます。）を定めます。

第1条（個人情報）
本ポリシーにおいて「個人情報」とは、個人情報保護法にいう「個人情報」を指し、生存する個人に関する情報であって、特定の個人を識別できる情報をいいます。

第2条（取得する個人情報および取得方法）
当方は、本サービスの提供にあたり、以下の情報を取得することがあります。
・メールアドレス
・認証に必要な情報（パスワード、または外部認証サービスにより提供される識別情報）

当方は、氏名、生年月日、住所、電話番号、支払い情報（クレジットカード情報、銀行口座情報等）その他の情報を取得することはありません。

第3条（個人情報の利用目的）
当方は、取得した個人情報を以下の目的のために利用します。
・本サービスの提供、運営、維持のため
・ユーザー認証および本人確認のため
・お問い合わせへの対応のため
・本サービスに関する重要なお知らせ、更新情報の通知のため
・不正利用の防止およびセキュリティ確保のため
・上記利用目的に付随する目的のため

第4条（個人情報の第三者提供）
当方は、法令に基づく場合を除き、ユーザーの同意なく個人情報を第三者に提供することはありません。

第5条（個人情報の取扱いの委託）
当方は、本サービスの運営に必要な範囲において、個人情報の取扱いを外部事業者に委託することがあります。この場合、当方は、当該委託先に対し、適切な管理および監督を行います。

第6条（安全管理措置）
当方は、個人情報の漏えい、滅失、き損等を防止するため、適切な安全管理措置を講じます。

第7条（個人情報の開示・訂正・利用停止等）
ユーザーは、当方が保有する自己の個人情報について、開示、訂正、追加、削除、利用停止等を求めることができます。
これらの請求については、合理的な範囲で、メールによる簡易な方法により対応します。

第8条（Cookieの使用について）
本サービスでは、サービスの利便性向上および利用状況の把握のため、Cookieを使用することがあります。
Cookieには、個人を特定する情報は含まれません。
ユーザーは、ブラウザの設定によりCookieの使用を無効にすることができます。

第9条（アクセス解析ツールについて）
本サービスでは、サービス改善および利用状況の分析のため、Googleが提供するアクセス解析ツール「Google Analytics」を利用する場合があります。
Google Analyticsは、トラフィックデータの収集のためにCookieを使用しますが、これらのデータは匿名で収集され、個人を特定するものではありません。
ユーザーは、ブラウザの設定により、Cookieを無効にすることでデータ収集を拒否することができます。

第10条（外部サービスとの連携）
本サービスでは、ユーザー認証のために外部認証サービス（Googleアカウント等）を利用する場合があります。
これらの外部サービスにおける個人情報の取扱いについては、各サービス提供者のプライバシーポリシーをご確認ください。

第11条（免責事項）
当方は、本サービスからリンク等により移動した外部サイトにおける個人情報の取扱いについて、一切の責任を負いません。

第12条（プライバシーポリシーの変更）
当方は、法令の変更や本サービスの内容変更等に応じて、本ポリシーを変更することがあります。
変更後のプライバシーポリシーは、本サービス上に掲載した時点から効力を生じるものとします。

第13条（準拠法）
本ポリシーは、日本法を準拠法とします。

第14条（お問い合わせ窓口）
本ポリシーに関するお問い合わせは、以下の窓口までご連絡ください。

事業者名：Yuru Labo（ゆるラボ）
所在地：Malaysia
Eメールアドレス：support@yuru-labo.com

制定日：2026年1月10日`;

export default function PrivacyPage() {
  const router = useRouter();
  const { status } = useAuth();

  const { title, body } = useMemo(() => {
    const [firstLine, ...rest] = policyText.split("\n");
    return {
      title: firstLine,
      body: rest.join("\n"),
    };
  }, []);

  const handleBack = () => {
    if (typeof window !== "undefined" && window.history.length > 1) {
      router.back();
      return;
    }

    router.push(status === "authenticated" ? "/routines" : "/");
  };

  return (
    <section className="routine-form-container">
      <button
        type="button"
        className="routine-form-back-btn"
        onClick={handleBack}
      >
        ← 戻る
      </button>
      <h1 className="routine-form-title">{title}</h1>
      <div className="policy-content">{body}</div>
    </section>
  );
}
